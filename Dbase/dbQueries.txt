CREATE DATABASE absGestion; 


EXECUTE


create table Role(
idRole int Primary Key identity(1,1),
role varchar(50) NOT NULL
);

create table Formation(
idFormation int Primary Key identity(1,1),
formation varchar(50) NOT NULL
);

create table Salle(
idSalle int Primary Key identity(1,1),
salle int NOT NULL
);

create table Admin(
idAdmin int Primary Key identity(1,1),
nom varchar(50) NOT NULL,
prenom varchar(50) NOT NULL, 
email varchar(50) NOT NULL, 
mdp varchar(50) NOT NULL,
pdp varchar(50),
phone varchar(50),
idRole int REFERENCES Role(idRole) NOT NULL,
);

create table Secretaire(
idSecretary int Primary Key identity(1,1),
nom varchar(50) NOT NULL,
prenom varchar(50) NOT NULL, 
email varchar(50) NOT NULL, 
mdp varchar(50) NOT NULL,
pdp varchar(50),
phone varchar(50),
idRole int REFERENCES Role(idRole) NOT NULL,
);

create table Formateur(
idFormateur int Primary Key identity(1,1),
nom varchar(50) NOT NULL,
prenom varchar(50) NOT NULL, 
email varchar(50) NOT NULL, 
mdp varchar(50) NOT NULL,
pdp varchar(50),
phone varchar(50),
idRole int REFERENCES Role(idRole) NOT NULL,
idFormation int REFERENCES Formation(idFormation) NOT NULL,
idSalle int REFERENCES Salle(idSalle)
);

create table Apprenant(
idApprenant int Primary Key identity(1,1),
nom varchar(50) NOT NULL,
prenom varchar(50) NOT NULL, 
email varchar(50) NOT NULL, 
mdp varchar(50) NOT NULL,
pdp varchar(50),
phone varchar(50),
adresse varchar(50),
idRole int REFERENCES Role(idRole) NOT NULL,
idFormation int REFERENCES Formation(idFormation) NOT NULL,
idSalle int REFERENCES Salle(idSalle),
nbrAbsJust int,
nbrAbsNonJust int,
nbrAbsDemiJour int,
tauxAbsenteisme int,
);


EXECUTE


ALTER TABLE Apprenant
ADD idAb int;


EXECUTE

ALTER TABLE Apprenant
ADD CONSTRAINT FK_AbsenceApprenant
FOREIGN KEY (idAb) REFERENCES Absence(idAbs);


