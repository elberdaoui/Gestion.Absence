CREATE DATABASE absGestion; 

create table Formation(
idFormation int Primary Key identity(1,1),
formation varchar(50) NOT NULL
);

create table Admin(
idAdmin int Primary Key identity(1,1),
nom varchar(50) NOT NULL,
prenom varchar(50) NOT NULL, 
email varchar(50) NOT NULL, 
mdp varchar(50) NOT NULL,
pdp varchar(50),
phone varchar(50),
);

create table Secretaire(
idSecretary int Primary Key identity(1,1),
nom varchar(50) NOT NULL,
prenom varchar(50) NOT NULL, 
email varchar(50) NOT NULL, 
mdp varchar(50) NOT NULL,
pdp varchar(50),
phone varchar(50)
);

create table Formateur(
idFormateur int Primary Key identity(1,1),
nom varchar(50) NOT NULL,
prenom varchar(50) NOT NULL, 
email varchar(50) NOT NULL, 
mdp varchar(50) NOT NULL,
pdp varchar(50),
phone varchar(50),
idFormation int REFERENCES Formation(idFormation) NOT NULL
);

create table Apprenant(
idApprenant int Primary Key identity(1,1),
nom varchar(50) NOT NULL,
prenom varchar(50) NOT NULL, 
email varchar(50) NOT NULL, 
mdp varchar(50) NOT NULL,
pdp varchar(50),
phone varchar(50),
adresse varchar(50),
idFormation int REFERENCES Formation(idFormation) NOT NULL,
salle int,
nbrAbsJust int,
nbrAbsNonJust int,
nbrAbsDemiJour int,
tauxAbsenteisme int,
idAbs int
);


create table Login(
id int Primary Key identity(1,1),
nom varchar(50),
prenom varchar(50), 
email varchar(50) NOT NULL,
mdp varchar(50) NOT NULL,
status varchar(50) NOT NULL,
);



create table Absence(
idAbs int Primary Key identity(1,1),
dateDebut date NOT NULL,
dateFin date NOT NULL,
nbrHeure float,
motif varchar(50),
justif varchar(50),
idApprenant int REFERENCES Apprenant(idApprenant) NOT NULL,
);


EXECUTE

ALTER TABLE Apprenant
ADD CONSTRAINT FK_AbsenceApprenant
FOREIGN KEY (idAbs) REFERENCES Absence(idAbs);


